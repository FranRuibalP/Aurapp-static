(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{5499:()=>{},11522:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts",function(){return r(76441)}])},49841:(e,t,r)=>{"use strict";r(5640),r(5499)},59581:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(5640),a=r(86826),n=r.n(a),o=r(87060),i=r(50148),l=r(94556);function c(e){let{isOpen:t,toggle:r}=e;return(0,s.jsxs)("button",{onClick:r,className:"cursor-pointer relative z-50 w-5 h-5 flex flex-col justify-between items-center",children:[(0,s.jsx)(l.P.span,{animate:{rotate:45*!!t,y:8*!!t},className:"w-full h-1 bg-white rounded origin-center",transition:{duration:.3}}),(0,s.jsx)(l.P.span,{animate:{opacity:+!t},className:"w-full h-1 bg-white rounded",transition:{duration:.3}}),(0,s.jsx)(l.P.span,{animate:{rotate:t?-45:0,y:t?-8:0},className:"w-full h-1 bg-white rounded origin-center",transition:{duration:.3}})]})}var d=r(70829);function u(e){let{isOpen:t,children:r}=e;return(0,s.jsx)(d.N,{children:t&&(0,s.jsx)(l.P.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{duration:.3},className:"absolute top-0 left-0 w-full bg-black bg-opacity-90 flex flex-col items-center py-6 z-40",children:r})})}function m(e){let{aura:t}=e,[r,a]=(0,i.useState)(!1),l=(0,o.useRouter)(),d=()=>a(!r),m=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),l.replace("/")};return(0,s.jsxs)("nav",{className:"fixed top-0 left-0 w-full px-4 py-2 flex justify-between items-center bg-black z-50",children:[(0,s.jsx)("h1",{className:"text-white font-bold text-xl",children:"Aurapp"}),(0,s.jsx)(c,{isOpen:r,toggle:d}),(0,s.jsxs)(u,{isOpen:r,children:[(0,s.jsx)("a",{href:"/home/#inicio",onClick:d,className:"text-white text-lg my-2",children:"Inicio"}),(0,s.jsx)("a",{href:"/home/#ranking",onClick:d,className:"text-white text-lg my-2",children:"Ranking"}),(0,s.jsx)(n(),{href:{pathname:"/posts",query:{aura:t}},passHref:!0,className:"text-white text-lg my-2",onClick:d,children:"Posts"}),(0,s.jsx)(n(),{href:{pathname:"/profile",query:{aura:t}},passHref:!0,className:"text-white text-lg my-2",onClick:d,children:"Perfil"}),(0,s.jsx)("button",{onClick:()=>{d(),m()},className:"cursor-pointer text-white text-lg my-2 text-left",children:"Cerrar sesi\xf3n"})]})]})}},76441:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(5640),a=r(86826),n=r.n(a),o=r(73143),i=r(59581),l=r(76460);r(49841);var c=r(50148),d=r(43054),u=r(66064);function m(e){let[t,r]=(0,c.useState)([]),[a,m]=(0,c.useState)([]),[x,p]=(0,c.useState)(!1),[h,f]=(0,c.useState)(!0);(0,c.useRef)(null),(0,c.useEffect)(()=>{d.A.get("".concat(u.env.NEXT_PUBLIC_URL_BACKEND,"posts")).then(e=>{let t=e.data.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));r(t),m(t.slice(0,10))}).catch(e=>{console.error("Error al obtener los posts:",e)})},[]),(0,c.useEffect)(()=>{let e=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&h&&b()};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[a,x,h,t]);let b=()=>{let e=(x?t.filter(e=>!e.auraImpactApplied):t).slice(a.length,a.length+10);if(0===e.length)return void f(!1);m([...a,...e])};return(0,s.jsxs)("div",{className:"relative min-h-screen flex justify-center mt-10 mb-30 bg-neutral-100 dark:bg-neutral-900 text-black dark:text-white",children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("main",{className:"w-full max-w-2xl mt-6 space-y-6 mr-4 ml-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Posts"}),(0,s.jsx)("button",{onClick:()=>{p(e=>!e),f(!0),m((x?t:t.filter(e=>!e.auraImpactApplied)).slice(0,10))},className:"cursor-pointer bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow transition",children:x?"Mostrar todos":"Mostrar solo abiertos"})]}),a.map(e=>(0,s.jsx)(l.A,{post:e},e._id)),!h&&(0,s.jsx)("p",{className:"text-center text-gray-500 mt-8",children:"No hay m\xe1s posts para mostrar."})]}),(0,s.jsx)(n(),{href:{pathname:"/post-aura",query:{aura:e}},className:"fixed bottom-6 right-6 bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-lg transition-all duration-300","aria-label":"Crear nuevo post",children:(0,s.jsx)(o.GGD,{className:"text-2xl"})})]})}},76460:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5640),a=r(50148),n=r(94556),o=r(73143),i=r(43054);r(49841);var l=r(66064);function c(e){let{post:t}=e,[r,c]=(0,a.useState)({upvote:t.tickCount,downvote:t.crossCount,selected:null}),[d,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),p=t._id;(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("user"));u((null==e?void 0:e._id)||"")},[]),(0,a.useEffect)(()=>{let e=t.upvotedBy.map(e=>e.toString()).includes(d),r=t.downvotedBy.map(e=>e.toString()).includes(d);c({upvote:t.tickCount,downvote:t.crossCount,selected:e?"upvote":r?"downvote":null})},[t,d]);let h=async e=>{if(r.selected!==e)try{let t=(await i.A.post("".concat(l.env.NEXT_PUBLIC_URL_BACKEND,"posts/vote/").concat(p),{userId:d,voteType:e})).data;c({upvote:t.tickCount,downvote:t.crossCount,selected:e})}catch(e){console.error("Error al votar:",e)}},f=async()=>{try{await i.A.delete("".concat(l.env.NEXT_PUBLIC_URL_BACKEND,"posts/").concat(p)),x(!1),window.location.reload()}catch(e){console.error("Error al eliminar el post:",e)}};return(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-2xl shadow-md max-w-sm mx-auto overflow-hidden",children:[(0,s.jsxs)("div",{className:"relative aspect-[4/4] w-full",children:[(0,s.jsx)("img",{src:t.image,alt:"Post",className:"w-full h-full object-cover rounded-t-2xl"}),(0,s.jsx)("div",{className:"absolute top-3 right-3 bg-white dark:bg-zinc-800 p-1.5 rounded-full shadow",children:t.auraImpactApplied?(0,s.jsx)(o.F5$,{className:"text-zinc-700 dark:text-white text-lg"}):(0,s.jsx)(o.K4k,{className:"text-zinc-700 dark:text-white text-lg"})}),d===t.author._id&&(0,s.jsx)("button",{onClick:()=>x(!0),className:"cursor-pointer absolute top-3 left-3 bg-rose-600 hover:bg-rose-700 p-1.5 rounded-full text-white shadow",title:"Eliminar post",children:(0,s.jsx)(o.IXo,{className:"text-base"})})]}),(0,s.jsxs)("div",{className:"p-5 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-white truncate",children:t.dedicatedTo.username}),(0,s.jsx)("span",{className:"text-xl font-bold ".concat(t.aura>0?"text-emerald-500":"text-rose-500"),children:t.aura>0?"+".concat(t.aura):t.aura})]}),(0,s.jsx)("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.description}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-3 border-t border-zinc-200 dark:border-zinc-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("img",{src:t.author.profileImage,alt:"Avatar",className:"w-9 h-9 rounded-full object-cover border"}),(0,s.jsx)("span",{className:"text-sm text-zinc-800 dark:text-zinc-200 font-medium",children:t.author.username})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>h("upvote"),className:"cursor-pointer p-2 rounded-full border border-emerald-400 transition duration-150 ".concat("upvote"===r.selected?"bg-emerald-100":"hover:bg-emerald-50"),children:(0,s.jsx)(o.YrT,{className:"text-green-600 text-lg"})}),(0,s.jsx)("span",{className:"text-sm text-zinc-800 dark:text-zinc-200",children:r.upvote}),(0,s.jsx)("button",{onClick:()=>h("downvote"),className:"cursor-pointer p-2 rounded-full border border-rose-400 transition duration-150 ".concat("downvote"===r.selected?"bg-rose-100":"hover:bg-rose-50"),children:(0,s.jsx)(o.yGN,{className:"text-red-600 text-lg"})}),(0,s.jsx)("span",{className:"text-sm text-zinc-800 dark:text-zinc-200",children:r.downvote})]})]})]}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"mr-4 ml-4 bg-white dark:bg-zinc-900 p-6 rounded-xl shadow-lg max-w-sm w-full text-center space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-rose-600",children:"\xbfEliminar post?"}),(0,s.jsx)("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Esta acci\xf3n no se puede deshacer."}),(0,s.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>x(!1),className:"cursor-pointer px-4 py-2 rounded-md bg-zinc-200 dark:bg-zinc-700 text-sm hover:bg-zinc-300 dark:hover:bg-zinc-600",children:"Cancelar"}),(0,s.jsx)("button",{onClick:f,className:"cursor-pointer px-4 py-2 rounded-md bg-rose-600 text-white text-sm hover:bg-rose-700",children:"Confirmar"})]})]})})]})}},78354:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(50148),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),o=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var s,a,n;s=e,a=t,n=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,i({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:n,title:l}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&s.createElement("title",null,l),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(a)}}},e=>{var t=t=>e(e.s=t);e.O(0,[394,715,315,636,593,792],()=>t(11522)),_N_E=e.O()}]);